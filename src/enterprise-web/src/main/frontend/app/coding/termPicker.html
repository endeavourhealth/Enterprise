<div class="modal-header">
	<button type="button" class="close" (click)="cancel()" aria-hidden="true">&times;</button>
	<h4 class="modal-title">Term Browser</h4>
</div>
<div class="modal-body">
	<form endUserRole="form" class="container-fluid">
		<div class="row">
			<div class="form-group col-md-4">
				<label class="control-label">Search for Terms</label>
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Search term" aria-describedby="searchTerm"
						   [(ngModel)]="searchTerm" (keyup)="$event.keyCode == 13 && search()" autofocus name="searchTerm">
					<span class="input-group-addon" (click)="search()" style="cursor: pointer">
						<i class="fa fa-search" id="searchTerm" aria-hidden="true"></i>
					</span>

				</div>
			</div>
			<div class="form-group col-md-4"><span style="color:black;font-size:10px"><i class="fa fa-info-circle" aria-hidden="true"></i> Use % as a wildcard (i.e. %height, asthma%, %serum%)</span>
			</div>
		</div>

		<div class="row">
			<div class="form-group col-md-8">
				<label class="control-label">Terms</label>
				<div class="scroll-box-150 form-control">
					<div *ngFor="let match of searchTerms"
							 (click)="displayCode(match, false)"
							 class="hover-box show-child-on-hover striped"
							 [ngClass]="{'selection': match?.originalTerm == highlightedMatch?.originalTerm}">
						<span *ngIf="match.recordType=='Patient'" style="cursor: pointer" class="fa fa-user fa-right-pad text-muted" ngbTooltip="{{ match.recordType }}"></span>
						<span *ngIf="match.recordType=='Observation'" style="cursor: pointer" class="fa fa-stethoscope fa-right-pad text-muted" ngbTooltip="{{ match.recordType }}"></span>
						<span *ngIf="match.recordType=='Medication'" style="cursor: pointer" class="fa fa-medkit fa-right-pad text-muted" ngbTooltip="{{ match.recordType }}"></span>
						<span *ngIf="match.recordType=='Allergy'" style="cursor: pointer" class="fa fa-exclamation-triangle fa-right-pad text-muted" ngbTooltip="{{ match.recordType }}"></span>
						<span *ngIf="match.recordType=='Referral'" style="cursor: pointer" class="fa fa-h-square fa-right-pad text-muted" ngbTooltip="{{ match.recordType }}"></span>
						<span *ngIf="match.recordType=='Encounter'" style="cursor: pointer" class="fa fa-user-md fa-right-pad text-muted" ngbTooltip="{{ match.recordType }}"></span>
						<span ngbTooltip="{{match.snomedTerm}} {{match.snomedConceptId}} {{match.originalCode}}" style="color:black;font-size:12px">{{ match.originalTerm }}</span>
						<button type="button" class="btn btn-xs btn-success pull-right child-to-show" (click)="addToSelection(match)">
							<span class="fa fa-sm fa-plus"></span>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="form-group col-md-8">
				<label class="control-label">Selected Term(s)</label>
				<div class="scroll-box-150 form-control">
					<div ngbTooltip="{{selection.code}}" *ngFor="let selection of resultData"
							 class="hover-box show-child-on-hover striped"
							 [ngClass]="{'selection': selection == highlightedSelection}" style="color:black;font-size:12px">
						{{ selection.term }}
						<button type="button" class="btn btn-xs btn-danger pull-right child-to-show" (click)="removeFromSelection(selection)">
							<span class="fa fa-sm fa-minus"></span>
						</button>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="form-group col-md-2">
				<span>
					<i class="fa fa-user" aria-hidden="true"></i> Patient
				</span>
			</div>
			<div class="form-group col-md-2">
				<span>
					<i class="fa fa-stethoscope" aria-hidden="true"></i> Observation
				</span>
			</div>
			<div class="form-group col-md-2">
				<span>
					<i class="fa fa-medkit" aria-hidden="true"></i> Medication
				</span>
			</div>
			<div class="form-group col-md-2">
				<span>
					<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Allergy
				</span>
			</div>
			<div class="form-group col-md-2">
				<span>
					<i class="fa fa-h-square" aria-hidden="true"></i> Referral
				</span>
			</div>
			<div class="form-group col-md-2">
				<span>
					<i class="fa fa-user-md" aria-hidden="true"></i> Encounter
				</span>
			</div>
		</div>

	</form>
</div>
<div class="modal-footer">
	<button type="button" class="btn"
					(click)="cancel()">Cancel</button>
	<button type="button" class="btn btn-primary"
					(click)="ok();">Ok</button>
</div>
