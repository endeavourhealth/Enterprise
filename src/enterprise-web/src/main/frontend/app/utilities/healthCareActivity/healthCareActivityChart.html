<div class="modal-header">
	<h4 class="modal-title">{{title}}</h4>
    <button type="button" class="close" (click)="cancel()" aria-hidden="true">&times;</button>
</div>
<div class="modal-body">
	<form role="form">
		<div class="row mb-3">
            <div class="col-md-12">
			<div class="card">
				<div class="card-header" (click)="showFilter = !showFilter">Breakdown / filter options <i class="fa fa-caret-down"></i> </div>
				<div class="card-body-popover" [hidden]="!showFilter">
					<div class="row">
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Breakdown: </label>
							<select class="form-control" [(ngModel)]="breakdown" name="breakdown">
								<option *ngFor="let set of breakdownOptions" [ngValue]="set">{{set.name}}</option>
							</select>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Gender: </label>
							<multiSelectDropdown [data]="filterGender" [(ngModel)]="genders" name="genderFilter"></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Ethnicity: </label>
							<multiSelectDropdown [data]="filterEthnicity" [(ngModel)]="ethnicity" name="ethnicityFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Postcode: </label>
							<multiSelectDropdown [data]="filterPostcode" [(ngModel)]="postcode" name="postcodeFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Age: </label>
							<multiSelectDropdown [data]="filterAgex10" [(ngModel)]="agex10" name="agex10Filter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Options: </label>
							<div>
								<button class="btn btn-sm btn-warning" (click)="clear()">Reset</button>
								<button class="btn btn-sm btn-primary" (click)="refresh()">Apply</button>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Encounter Type: </label>
							<multiSelectDropdown [data]="filterEncounterType" [(ngModel)]="encounterType" name="encounterTypeFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">LSOA: </label>
							<multiSelectDropdown [data]="filterLsoa" [(ngModel)]="lsoa" name="lsoaFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">MSOA: </label>
							<multiSelectDropdown [data]="filterMsoa" [(ngModel)]="msoa" name="msoaFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Service: </label>
							<multiSelectDropdown [data]="filterServices" [(ngModel)]="services" name="serviceFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">Organisation: </label>
							<multiSelectDropdown [data]="filterOrgs" [(ngModel)]="orgs" name="orgFilter" ></multiSelectDropdown>
						</div>
						<div class="form-group col-md-2 col-sm-3">
							<label class="control-label">CCG: </label>
							<multiSelectDropdown [data]="filterCcg" [(ngModel)]="ccgs" name="ccgFilter" ></multiSelectDropdown>
						</div>
					</div>
				</div>
			</div>
            </div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<loadingIndicator [done]="activityData">
					<ngb-tabset>
						<ngb-tab title="Graph">
							<template ngbTabContent>
								<div class="row">
									<div class="col-md-12">
										<chart [data]="activityData"></chart>
									</div>
								</div>
							</template>
						</ngb-tab>
						<ngb-tab title="Table">
							<template ngbTabContent>
								<div class="row">
									<div class="col-md-12">
										<chart-table [data]="activityData"></chart-table>
									</div>
								</div>
							</template>
						</ngb-tab>
					</ngb-tabset>
				</loadingIndicator>
			</div>
		</div>
	</form>
</div>

<div class="modal-footer">
	<button type="button" class="btn btn-success" (click)="export()">Export</button>
	<button type="button" class="btn btn-danger" (click)="cancel()">Close</button>
</div>
