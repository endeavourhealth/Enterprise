<div class="module">
	<div class="container-fluid">
		<div class="module-heading">Report
			<div class="pull-right">
				<button type="button" class="btn btn-sm btn-success" ng-hide="reportCtrl.readOnly" data-ng-click="reportCtrl.save(false)">Save</button>
				<button type="button" class="btn btn-sm btn-warning" ng-hide="reportCtrl.readOnly" data-ng-click="reportCtrl.save(true)">Save & Close</button>
				<button type="button" class="btn btn-sm btn-danger" data-ng-click="reportCtrl.close()">Cancel</button>
			</div>
		</div>
		<div class="module-body">
			<form>
				<div class="row">
					<div class="form-group col-md-6">
						<label for="report-name">Name</label>
						<input type="text" class="form-control" id="report-name" ng-model="reportCtrl.report.name">
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-12">
						<label for="report-description">Description</label>
						<input type="text" class="form-control" id="report-description" ng-model="reportCtrl.report.description">
					</div>
				</div>
				<div class="row">
					<div class="form-group col-md-7">
						<div class="panel panel-default">
							<div class="panel-heading">Components</div>
							<div class="panel-body">
								<form>
									<div class="form-group">
										<div class="row">
											<div class="col-md-5">
												<div ui-tree data-nodrop-enabled="true" data-nodrag id="folder-tree">
													<ol ui-tree-nodes ng-model="reportCtrl.treeData">
														<li ng-repeat="node in reportCtrl.treeData" ui-tree-node ng-include="'folder_template.html'"></li>
													</ol>
												</div>
											</div>
											<div class="col-md-7">
												<div ui-tree="reportCtrl.contentTreeCallbackOptions" data-clone-enabled="true" data-nodrop-enabled="true" id="content-tree">
													<ol ui-tree-nodes ng-model="reportCtrl.itemSummaryList.contents">
														<li ng-repeat="node in reportCtrl.itemSummaryList.contents" ui-tree-node ng-include="'content_template.html'">
														</li>
													</ol>
												</div>
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>

					<div class="form-group col-md-5">
						<div class="panel panel-default">
							<div class="panel-heading">Structure</div>
							<div class="panel-body">
								<form>
									<div class="form-group">
										<div class="row">
											<div class="col-md-12">
												<div ui-tree id="report-tree">
													<ol ui-tree-nodes ng-model="reportCtrl.reportContent">
														<li ng-repeat="node in reportCtrl.reportContent" ui-tree-node ng-include="'report_template.html'">
														</li>
													</ol>
												</div>
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>

<script type="text/ng-template" id="folder_template.html">
		<div ui-tree-handle class="tree-node tree-node-content" style="cursor:pointer">
			<span class="show-child-on-hover folder-item" ng-class="{'selection': node.uuid == reportCtrl.selectedNode.uuid}">
				<span	ng-if="!node.hasChildren" data-nodrag class="glyphicon glyphicon-sm glyphicon-blank text-muted"></span>
				<span ng-if="node.hasChildren" data-nodrag	class="glyphicon glyphicon-sm text-muted"
							ng-class="{'glyphicon-chevron-right': !node.isExpanded,'glyphicon-chevron-down': node.isExpanded}"
							ng-click="reportCtrl.toggleExpansion(node)"></span>
				<span	ng-click="reportCtrl.selectNode(node)">
					<span	class="glyphicon glyphicon-folder-open glyphicon-right-pad text-primary"></span>
					<span>{{node.folderName}}</span>
					<span class="glyphicon glyphicon-sm glyphicon-refresh glyphicon-refresh-animate" ng-show="node.loading"></span>
				</span>
			</span>
		</div>
		<ol ui-tree-nodes ng-model="node.nodes" ng-show="node.isExpanded">
			<li ui-tree-node ng-repeat="node in node.nodes" ng-include="'folder_template.html'">
			</li>
		</ol>
	</script>

<script type="text/ng-template" id="content_template.html">
		<div ui-tree-handle class="tree-node tree-node-content show-child-on-hover">
				<span>
					<span class="glyphicon glyphicon-right-pad {{node.type | itemTypeIdToIcon}} text-muted"></span>
					{{node.name}}
				</span>
		</div>
		<ol ui-tree-nodes="" ng-model="node.children">
			<li ng-repeat="node in node.children" ui-tree-node ng-include="'content_template.html'">
			</li>
		</ol>
	</script>

<script type="text/ng-template" id="report_template.html">
		<div ui-tree-handle class="tree-node tree-node-content show-child-on-hover">
			<span>
				<span class="glyphicon glyphicon-right-pad {{node.type | itemTypeIdToIcon}} text-muted"></span>
				{{node.name}}
			</span>
			<button type="button" class="btn btn-xs btn-danger child-to-show pull-right" data-nodrag ng-click="reportCtrl.remove(this)">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
			</button>
		</div>
		<ol ui-tree-nodes="" ng-model="node.children">
			<li ng-repeat="node in node.children" ui-tree-node ng-include="'report_template.html'">
			</li>
		</ol>
	</script>
