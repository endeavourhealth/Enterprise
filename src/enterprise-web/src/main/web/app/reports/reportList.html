<div class="module">
	<div class="container-fluid">
		<div class="module-heading">
			Report items
		</div>
		<div class="module-body">
			<form>
				<div class="form-group">
					<div class="row">

						<div class="col-md-3">
							<div ui-tree data-nodrop-enabled="true" data-nodrag  id="tree-root">
								<ol ui-tree-nodes ng-model="reportListCtrl.treeData">
									<li ng-repeat="node in reportListCtrl.treeData" ui-tree-node ng-include="'node_template.html'"></li>
								</ol>
							</div>
						</div>

						<div class="col-md-9">
							<div class="table">
								<table class="table table-striped table-condensed">
									<thead>
										<tr>
											<th class="col-md-4" ng-click="sortField='name'; sortReverse=!sortReverse">Title
												<span ng-show="sortField == 'name'"
															class="glyphicon glyphicon-sm"
															ng-class="{'glyphicon-chevron-down':!sortReverse, 'glyphicon-chevron-up':sortReverse}"></span>
											</th>
											<th class="col-md-4" ng-click="sortField='lastModified'; sortReverse=!sortReverse">Date modified
												<span ng-show="sortField == 'lastModified'"
															class="glyphicon glyphicon-sm"
															ng-class="{'glyphicon-chevron-down':!sortReverse, 'glyphicon-chevron-up':sortReverse}"></span>
											</th>
											<th class="col-md-3" ng-click="sortField='type'; sortReverse=!sortReverse">Type
												<span ng-show="sortField == 'type'"
															class="glyphicon glyphicon-sm"
															ng-class="{'glyphicon-chevron-down':!sortReverse, 'glyphicon-chevron-up':sortReverse}"></span>
											</th>
											<th class="col-md-1"></th>
										</tr>
									</thead>
									<tbody>
										<tr class="hover-box show-child-on-hover" ng-repeat="item in reportListCtrl.itemSummaryList.contents | orderBy:sortField:sortReverse">
											<td><a ui-sref="app.reportAction({itemUuid: item.uuid, itemAction: 'edit'})">{{item.name}}</a></td>
											<td>{{item.lastModified | date:'dd-MMM-yyyy HH:mm:ss'}}</td>
											<td><span class="glyphicon glyphicon-right-pad {{item.type | itemTypeIdToIcon}} text-muted"></span>{{item.type | itemTypeIdToString}}</td>
											<td>
												<div class="child-to-show">
													<button type="button" class="btn btn-primary btn-xs" ng-click="reportListCtrl.run(item)">Run</button>
													<span uib-dropdown>
														<button type="button" class="btn btn-xs btn-default" uib-dropdown-toggle>...</button>
														<ul uib-dropdown-menu>
															<li class="disabled"><a href="#">Rename</a></li>
															<li><a ng-click="reportListCtrl.deleteItem(this)">Delete</a></li>
															<li role="separator" class="divider"></li>
															<li class="disabled"><a href="#">Cut</a></li>
															<li class="disabled"><a href="#">Copy</a></li>
															<li class="disabled"><a href="#">Paste</a></li>
														</ul>
													</span>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</form>

		</div>
	</div>
</div>

<script type="text/ng-template" id="node_template.html">
	<div ui-tree-handle class="tree-node tree-node-content" style="cursor:pointer">
		<span class="show-child-on-hover folder-item"
					ng-class="{'selection': node.uuid == reportListCtrl.selectedNode.uuid}">
			<span	ng-if="!node.hasChildren" data-nodrag class="glyphicon glyphicon-sm glyphicon-blank text-muted"></span>
			<span ng-if="node.hasChildren" data-nodrag	class="glyphicon glyphicon-sm text-muted"
						ng-class="{'glyphicon-chevron-right': !node.isExpanded,'glyphicon-chevron-down': node.isExpanded}"
						ng-click="reportListCtrl.toggleExpansion(node)"></span>
			<span ng-click="reportListCtrl.selectNode(node)" style="cursor:pointer">
				<span	class="glyphicon glyphicon-folder-open glyphicon-right-pad text-primary"></span>
				<span>{{node.folderName}}</span>
				<span class="glyphicon glyphicon-sm glyphicon-refresh glyphicon-refresh-animate" ng-show="node.loading"></span>
				<span uib-dropdown>
					<button type="button" class="btn btn-xs btn-default child-to-show pull-right" uib-dropdown-toggle>...</button>
					<ul uib-dropdown-menu>
						<li><a ui-sref="app.reportAction({itemUuid: node.uuid, itemAction: 'add'})">Add report</a></li>
						<li role="separator" class="divider"></li>
						<li><a  ng-click="reportListCtrl.addChildFolder(node)">Add child folder</a></li>
						<li role="separator" class="divider"></li>
						<li ng-class="{'disabled': !node.parentFolderUuid}"><a ng-click="!node.parentFolderUuid || reportListCtrl.renameFolder(this)">Rename</a></li>
						<li ng-class="{'disabled': !node.parentFolderUuid}"><a ng-click="!node.parentFolderUuid || reportListCtrl.deleteFolder(this)">Delete</a></li>
						<li role="separator" class="divider"></li>
						<li class="disabled"><a href="#">Cut</a></li>
						<li class="disabled"><a href="#">Copy</a></li>
						<li class="disabled"><a href="#">Paste</a></li>
					</ul>
				</span>
			</span>
		</span>
	</div>
	<ol ui-tree-nodes ng-model="node.nodes" ng-show="node.isExpanded">
		<li ui-tree-node ng-repeat="node in node.nodes" ng-include="'node_template.html'">
		</li>
	</ol>
</script>
