<!DOCTYPE html>
<html>
<head>

	<meta charset="UTF-8"> 

	<title>Enterprise REST Test</title>

	<style>
		body {background-color:lightgrey;}
		input {width: 300px;}
	</style>

<script>


	function post(url, params)
	{
		//testing git

		var para = appendHeadingToResults(url);

		if (typeof(params)!='undefined')
		{
			var jsonStr = JSON.stringify(params);
			appendResult(para, "request", jsonStr);
		}
	
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.DisableHeaderCheck = true;

		xmlhttp.onreadystatechange = function()
		{
			if (xmlhttp.readyState == 4) //request complete
			{
				var status = xmlhttp.status;
				var statusText = xmlhttp.statusText;
				appendResult(para, "response status", status + " " + statusText);

				/*var headers = xmlhttp.getAllResponseHeaders();
				appendResult(para, "headers", headers);*/

				/*var cookie = xmlhttp.getResponseHeader('Set-Cookie');
				appendResult(para, "cookie", cookie);*/

				var response = xmlhttp.responseText;
				appendResult(para, "response", response);

				scrollToEnd();
			}
		};

		xmlhttp.open("POST", url, true);

		xmlhttp.setRequestHeader('Accept', 'application/json');
		xmlhttp.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
		if(typeof(params)!='undefined')
		{
			xmlhttp.setRequestHeader('Content-Length', params.length);
		}

		//if (params == null)
		if(typeof(params)=='undefined')
		{
			xmlhttp.send();
		}
		else
		{
			var jsonStr = JSON.stringify(params);
			xmlhttp.send(jsonStr);
		}


	}

	function get(url, params)
	{
		var para = appendHeadingToResults(url);

		if (typeof(params)!='undefined')
		{
			appendResult(para, "params", params);

			url += '?' + params;
		}

		var xmlhttp = new XMLHttpRequest();

		xmlhttp.onreadystatechange = function() {
		
			if (xmlhttp.readyState == 4) //request complete
			{
				var status = xmlhttp.status;
				var statusText = xmlhttp.statusText;
				appendResult(para, "response status", status + " " + statusText);
			
				var response = xmlhttp.responseText;
				appendResult(para, "response", response);
	   		}
		};

		xmlhttp.open("GET", url, true);
		xmlhttp.setRequestHeader('Accept', 'application/json');

		xmlhttp.send();

		scrollToEnd();
	}

	function appendHeadingToResults(title)
	{
		var d = new Date();
		var titleWithTime = "" + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + " -> " + title;

		var para = document.createElement("p");
		var heading = document.createElement("strong");
		var textNode = document.createTextNode(titleWithTime);
		var resultsElement = document.getElementById("results");

		heading.appendChild(textNode);
		para.appendChild(heading);
		resultsElement.appendChild(para);

		return para;
	}

	function appendResult(para, name, value)
	{
		//var para = document.createElement("p");
		var brElement = document.createElement("br");
		var codeElement = document.createElement("code");
		var nameTextNode = document.createTextNode(name + ": ");
		var valueTextNode = document.createTextNode(value);
		var resultsElement = document.getElementById("results");


		codeElement.appendChild(valueTextNode);

		para.appendChild(brElement);
		para.appendChild(nameTextNode);
		para.appendChild(codeElement);
		//resultsElement.appendChild(para);
	}

	function scrollToEnd()
	{
		window.scrollTo(0,document.body.scrollHeight);
	}




</script>

</head>

<body>

<h2>/api/security/login</h2>

	Username: <input type="text" id="username" value="drewlittler@hotmail.com">
	<br/>
	Password: <input type="text" id="password" value="test">
	<br/>
	<button type="button" onclick="performLogin()">Submit</button>

	<script>
		function performLogin() {

			var usernameStr = document.getElementById('username').value;
			var passwordStr = document.getElementById('password').value;

			var params = {username:usernameStr, password:passwordStr};
			var jsonStr = JSON.stringify(params);

			post('/api/security/login/', params);

		}
	</script>

<hr/>
<h2>/api/security/selectOrganisation</h2>

	Organisation UUID: <input type="text" id="uuid">
	<br/>
	<button type="button" onclick="selectOrganisation()">Submit</button>

	<script>
		function selectOrganisation() {

			var orgUuid = document.getElementById('uuid').value;
			var params = {uuid:orgUuid};

			post('/api/security/selectOrganisation/', params);
	
		}
	</script>

<hr/>
<h2>/api/security/changePassword</h2>

	New password: <input type="text" id="changePasswordNewPassword">
	<br/>
	<button type="button" onclick="changePassword()">Submit</button>

	<script>
		function changePassword() {

			var newPassword = document.getElementById('changePasswordNewPassword').value;
			var params = {password:newPassword};

			post('/api/security/changePassword/', params);
	
		}
	</script>

<hr/>
<h2>/api/security/logoff</h2>

	<button type="button" onclick="logoff()">Submit</button>

	<script>
		function logoff() {

			post('/api/security/logoff/');
	
		}
	</script>

<hr/>
<h2>/api/security/setPasswordFromInviteEmail</h2>

	Token: <input type="text" id="inviteToken">
	<br/>
	Password: <input type="text" id="invitePassword">
	<br/>
	<button type="button" onclick="setPasswordFromInvite()">Submit</button>

	<script>
		function setPasswordFromInvite() {

			var emailToken = document.getElementById('inviteToken').value;
			var newPassword = document.getElementById('invitePassword').value;

			var params = {token:emailToken, password:newPassword};

			post('/api/security/setPasswordFromInviteEmail/', params);
	
		}
	</script>

<hr/>
<h2>/api/admin/getUsers</h2>

	<button type="button" onclick="getUsers()">Submit</button>

	<script>
		function getUsers() {

			get('/api/admin/getUsers/');
	
		}
	</script>

<hr/>
<h2>/api/admin/saveUser</h2>

	User UUID: <input type="text" id="saveUserUuid">(leave blank to create a new user)
	<br/>
	Email: <input type="text" id="saveUserEmail">
	<br/>
	Title: <input type="text" id="saveUserTitle"">
	<br/>
	Forename: <input type="text" id="saveUserForename">
	<br/>
	Surname: <input type="text" id="saveUserSurname"">
	<br/>
	Permissions:
	<select id="saveUserPermissions">
		<option value="1">User</option>
		<option value="2">Admin</option>
	</select>
	<br/>
	Super user: <input type="checkbox" id="saveUserSuperUser"">
	<br/>

	<button type="button" onclick="saveUser()">Submit</button>

	<script>
			function saveUser() {

				var params = {};

				var s = document.getElementById('saveUserUuid').value;
				if (s.length > 0)
				{
					params["uuid"] = s;
				}

				s = document.getElementById('saveUserEmail').value;
				if (s.length > 0)
				{
					params["username"] = s;
				}

				s = document.getElementById('saveUserTitle').value;
				if (s.length > 0)
				{
					params["title"] = s;
				}

				s = document.getElementById('saveUserForename').value;
				if (s.length > 0)
				{
					params["forename"] = s;
				}

				s = document.getElementById('saveUserSurname').value;
				if (s.length > 0)
				{
					params["surname"] = s;
				}

				var s = document.getElementById('saveUserPermissions').value;
				if (s.length > 0)
				{
					params["permissions"] = s;
				}

				if (document.getElementById("saveUserSuperUser").checked)
				{
					params["isSuperUser"] = 'true';
				}

				post('/api/admin/saveUser/', params);

			}
		</script>

<hr/>
<h2>/api/admin/deleteUser</h2>

	User UUID: <input type="text" id="deleteUserUuid">
	<br/>
	<button type="button" onclick="deleteUser()">Submit</button>


	<script>
			function deleteUser() {

				var s = document.getElementById('deleteUserUuid').value;
				var params = {uuid:s};

				post('/api/admin/deleteUser/', params);
			}
		</script>




<hr/>
<h2>/api/admin/resendInviteEmail</h2>

	Email: <input type="text" id="resendInviteEmail">
	<br/>
	<button type="button" onclick="resendInviteEmail()">Submit</button>


	<script>
		function resendInviteEmail() {

			var s = document.getElementById('resendInviteEmail').value;
			var params = {username:s};

			post('/api/admin/resendInviteEmail/', params);
		}
	</script>

<hr/>
<h2>/api/admin/saveOrganisation</h2>

	Organisation UUID: <input type="text" id="saveOrganisationUuid">(Leave blank to create new one)
	<br/>
	Organisation name: <input type="text" id="saveOrganisationName">
	<br/>
	National ID: <input type="text" id="saveOrganisationId">
	<br/>
	<button type="button" onclick="saveOrganisation()">Submit</button>

	<script>
			function saveOrganisation() {

				var params = {};

				var s = document.getElementById('saveOrganisationUuid').value;
				if (s.length > 0)
				{
					params["uuid"] = s;
				}

				s = document.getElementById('saveOrganisationName').value;
				if (s.length > 0)
				{
					params["name"] = s;
				}

				s = document.getElementById('saveOrganisationId').value;
				if (s.length > 0)
				{
					params["nationalId"] = s;
				}

				post('/api/admin/saveOrganisation/', params);

			}
		</script>


<hr/>
<h2>/api/folder/saveFolder</h2>

	Folder UUID: <input type="text" id="saveFolderUuid">(leave blank to create a new folder)
	<br/>
	Folder name: <input type="text" id="saveFolderName">
	<br/>
	Folder type:
	<select id="saveFolderType">
		<option value="1">Library</option>
		<option value="2">Reports</option>
	</select>
	<br/>
	Parent folder UUID: <input type="text" id="saveFolderParentUuid">
	<br/>
	<button type="button" onclick="saveFolder()">Submit</button>


	<script>
		function saveFolder() {

			var params = {};

			var s = document.getElementById('saveFolderUuid').value;
			if (s.length > 0)
			{
				params["uuid"] = s;
			}
			s = document.getElementById('saveFolderName').value;
			if (s.length > 0)
			{
				params["folderName"] = s;
			}
			s = document.getElementById('saveFolderType').value;
			if (s.length > 0)
			{
				params["folderType"] = s;
			}
			s = document.getElementById('saveFolderParentUuid').value;
			if (s.length > 0)
			{
				params["parentFolderUuid"] = s;
			}

			post('/api/folder/saveFolder/', params);
		}
	</script>

<hr/>
<h2>/api/folder/deleteFolder</h2>

	Folder UUID: <input type="text" id="deleteFolderUuid">
	<br/>
	<button type="button" onclick="deleteFolder()">Submit</button>


	<script>
		function deleteFolder() {

			var s = document.getElementById('deleteFolderUuid').value;

			var params = {uuid:s};
			post('/api/folder/deleteFolder/', params);

		}
	</script>


<hr/>
<h2>/api/folder/getFolders</h2>

	Folder type <select id="getFoldersType">
		<option value="1">Library</option>
		<option value="2">Reports</option>
	</select>
	<br/>
	Parent folder UUID: <input type="text" id="getFoldersParentUuid">
	<br/>
	<button type="button" onclick="getFolders()">Submit</button>

	<script>
		function getFolders() {

			var s = document.getElementById('getFoldersType').value;
			var params = 'folderType=' + s;

			s = document.getElementById('getFoldersParentUuid').value;
			if (s.length > 0)
			{
				params += '&parentUuid=' + s;
			}

			get('/api/folder/getFolders', params);
		}
	</script>


<hr/>
<h2>/api/folder/getFolderContents</h2>

	Folder UUID: <input type="text" id="getFolderContentsUuid">
	<br/>
	<button type="button" onclick="getFolderContents()">Submit</button>

	<script>
		function getFolderContents() {

			var s = document.getElementById('getFolderContentsUuid').value;
			var params = 'folderUuid=' + s;

			get('/api/folder/getFolderContents', params);
		}
	</script>


<hr/>
<h2>/api/report/getReport</h2>

	UUID: <input type="text" id="getReportUuid">
	<br/>
	<button type="button" onclick="getReport()">Submit</button>

	<script>
		function getReport() {

			var s = document.getElementById('getReportUuid').value;

			get('/api/report/getReport', 'uuid=' + s);
		}
	</script>

<hr/>
<h2>/api/report/saveReport</h2>


	UUID: <input type="text" id="saveReportUuid">(leave blank to create a new one)
	<br/>
	Name: <input type="text" id="saveReportName">
	<br/>
	Description: <input type="text" id="saveReportDescription">
	<br/>
	XML Content: <input type="text" id="saveReportXml">
	<br/>
	Is Deleted: <input type="checkbox" id="saveReportDeleted">
	<br/>
	Folder UUID: <input type="text" id="saveReportFolderUuid">
	<br/>
	<button type="button" onclick="saveReport()">Submit</button>
	
	<script>
		function saveReport() {

			var params = {};

			var s = document.getElementById('saveReportUuid').value;
			if (s.length > 0)
			{
				params['uuid'] = s;
			}

			s = document.getElementById('saveReportName').value;
			if (s.length > 0)
			{
				params['name'] = s;
			}

			s = document.getElementById('saveReportDescription').value;
			if (s.length > 0)
			{
				params['description'] = s;
			}

			s = document.getElementById('saveReportXml').value;
			if (s.length > 0)
			{
				params['xmlContent'] = s;
			}

			if (document.getElementById("saveReportDeleted").checked)
			{
				params['isDeleted'] = 'true';
			}

			s = document.getElementById('saveReportFolderUuid').value;
			if (s.length > 0)
			{
				params['folderUuid'] = s;
			}

			post('/api/report/saveReport/', params);

		}
	</script>

<hr/>
<h2>/api/report/deleteReport</h2>

	UUID: <input type="text" id="deleteReportUuid">
	<br/>
	<button type="button" onclick="deleteReport()">Submit</button>

	<script>
		function deleteReport() {

			var s = document.getElementById('deleteReportUuid').value;
			var params = {uuid:s};

			post('/api/report/deleteReport/', params);

		}
	</script>

<hr/>
<h2>/api/query/getQuery</h2>

	UUID: <input type="text" id="getQueryUuid">
	<br/>
	<button type="button" onclick="getQuery()">Submit</button>

	<script>
		function getQuery() {

			var s = document.getElementById('getQueryUuid').value;

			get('/api/query/getQuery', 'uuid=' + s);
		}
	</script>

<hr/>
<h2>/api/query/saveQuery</h2>

	
	UUID: <input type="text" id="saveQueryUuid">(leave blank to create a new one)
	<br/>
	Name: <input type="text" id="saveQueryName">
	<br/>
	Description: <input type="text" id="saveQueryDescription">
	<br/>
	XML Content: <input type="text" id="saveQueryXml">
	<br/>
	Is Deleted: <input type="checkbox" id="saveQueryDeleted">
	<br/>
	Folder UUID: <input type="text" id="saveQueryFolderUuid">
	<br/>
	<button type="button" onclick="saveQuery()">Submit</button>
	
	<script>
		function saveQuery() {

			var params = {};

			var s = document.getElementById('saveQueryUuid').value;
			if (s.length > 0)
			{
				params['uuid'] = s;
			}

			s = document.getElementById('saveQueryName').value;
			if (s.length > 0)
			{
				params['name'] = s;
			}

			s = document.getElementById('saveQueryDescription').value;
			if (s.length > 0)
			{
				params['description'] = s;
			}

			s = document.getElementById('saveQueryXml').value;
			if (s.length > 0)
			{
				params['xmlContent'] = s;
			}

			if (document.getElementById("saveQueryDeleted").checked)
			{
				params['isDeleted'] = 'true';
			}

			s = document.getElementById('saveQueryFolderUuid').value;
			if (s.length > 0)
			{
				params['folderUuid'] = s;
			}

			post('/api/query/saveQuery/', params);

		}
	</script>

<hr/>
<h2>/api/query/deleteQuery</h2>

	UUID: <input type="text" id="deleteQueryUuid">
	<br/>
	<button type="button" onclick="deleteQuery()">Submit</button>

	<script>
		function deleteQuery() {

			var s = document.getElementById('deleteQueryUuid').value;
			var params = {uuid:s};

			post('/api/query/deleteQuery/', params);

		}
	</script>

<hr/>
<h2>/api/listOutput/getListOutput</h2>

	UUID: <input type="text" id="getListOutputUuid">
	<br/>
	<button type="button" onclick="getListOutput()">Submit</button>

	<script>
		function getListOutput() {

			var s = document.getElementById('getListOutputUuid').value;

			get('/api/listOutput/getListOutput', 'uuid=' + s);
		}
	</script>


<hr/>
<h2>/api/listOutput/saveListOutput</h2>

	UUID: <input type="text" id="saveListOutputUuid">(leave blank to create a new one)
	<br/>
	Name: <input type="text" id="saveListOutputName">
	<br/>
	Description: <input type="text" id="saveListOutputDescription">
	<br/>
	XML Content: <input type="text" id="saveListOutputXml">
	<br/>
	Is Deleted: <input type="checkbox" id="saveListOutputDeleted">
	<br/>
	Folder UUID: <input type="text" id="saveListOutputFolderUuid">
	<br/>
	<button type="button" onclick="saveListOutput()">Submit</button>

	<script>
		function saveListOutput() {

			var params = {};

			var s = document.getElementById('saveListOutputUuid').value;
			if (s.length > 0)
			{
				params['uuid'] = s;
			}

			s = document.getElementById('saveListOutputName').value;
			if (s.length > 0)
			{
				params['name'] = s;
			}

			s = document.getElementById('saveListOutputDescription').value;
			if (s.length > 0)
			{
				params['description'] = s;
			}

			s = document.getElementById('saveListOutputXml').value;
			if (s.length > 0)
			{
				params['xmlContent'] = s;
			}

			if (document.getElementById("saveListOutputDeleted").checked)
			{
				params['isDeleted'] = 'true';
			}

			s = document.getElementById('saveListOutputFolderUuid').value;
			if (s.length > 0)
			{
				params['folderUuid'] = s;
			}

			post('/api/listOutput/saveListOutput/', params);

		}
	</script>

<hr/>
<h2>/api/listOutput/deleteListOutput</h2>

	UUID: <input type="text" id="deleteListOutputUuid">
	<br/>
	<button type="button" onclick="deleteListOutput()">Submit</button>

	<script>
		function deleteListOutput() {

			var s = document.getElementById('deleteListOutputUuid').value;
			var params = {uuid:s};

			post('/api/listOutput/deleteListOutput/', params);

		}
	</script>

<hr/>
<h2>Results</h2>


<div id="results"></div>




</body>
</html> 
