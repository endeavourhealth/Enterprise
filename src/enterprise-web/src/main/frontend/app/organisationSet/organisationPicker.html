<div class="modal-header">
	<button type="button" class="close" (click)="cancel()" aria-hidden="true">&times;</button>
	<h4 class="modal-title">Organisation Picker</h4>
</div>
<div class="modal-body">
	<form endUserRole="form" class="container-fluid">
		<!-- Name -->
		<div class="row" *ngIf="editMode">
			<div class="form-group col-md-12">
				<label class="control-label">Organisation Set Name</label>
				<input type="text" class="form-control" [(ngModel)]="resultData.name" name="name">
			</div>
		</div>

		<!-- Organisation Set -->
		<div class="row" *ngIf="!editMode">
			<div class="form-group col-md-12">
				<label>Defined Sets</label>
				<div class="row">
					<div class="col-md-9">
						<div class="btn-group btn-block dropdown" uib-dropdown>
							<button type="button" class="btn btn-default btn-block" uib-dropdown-toggle>
								<div>
									<span style="float: left">{{ resultData.name }}</span><span style="float: right; vertical-align: middle"><i class="fa fa-caret-down"></i></span>
								</div>
							</button>
							<ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
								<li role="menuitem"><a (click)="selectSet(null)">&lt;New Organisation Set&gt;</a></li>
								<li class="divider"></li>
								<li role="menuitem" *ngFor="let orgSet of organisationSetList"><a (click)="selectSet(orgSet)">{{ orgSet.name }}</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md-3">
						<Button type="button" class="btn btn-success btn-block" (click)="saveSet()">Save Set</Button>
					</div>
				</div>
			</div>
		</div>

		<!-- Search -->
		<div class="row">
			<div class="form-group col-md-12">
				<label class="control-label">Search</label>
				<div class="input-group">
					<input type="text" class="form-control" autofocus
								 placeholder="Seach criteria"
								 [(ngModel)]="searchCriteria"
								 (keyup)="$event.keyCode == 13 && search()"
					 			 name="searchCriteria">
					<span class="input-group-addon" (click)="search()" style="cursor: pointer">
						<i class="fa fa-search" id="searchTerm" aria-hidden="true"></i>
					</span>
				</div>
			</div>
		</div>

		<!-- Matches -->
		<div class="row">
			<div class="form-group col-md-12">
				<label>Matches</label>
				<div class="form-control scroll-box-100">
					<div class="row striped hover-box show-child-on-hover" *ngFor="let org of searchResults">
						<div class="col-md-8">{{ org.name }}</div>
						<div class="col-md-3">{{ org.odsCode }}</div>
						<div class="col-md-1"><button type="button" class="btn btn-xs btn-success child-to-show" (click)="addOrganisationToSelection(org)"><span class="fa fa-plus"></span></button></div>
					</div>
				</div>
			</div>
		</div>

		<!-- Selection -->
		<div class="row">
			<div class="form-group col-md-12">
				<label>Selection</label><button type="button" class="btn btn-xs btn-warning pull-right" (click)="removeAll()">Remove all</button>
				<div class="form-control scroll-box-100">
					<div class="row striped hover-box show-child-on-hover" *ngFor="let member of resultData.organisations">
						<div class="col-md-8">{{ member.name }}</div>
						<div class="col-md-3">{{ member.odsCode }}</div>
						<div class="col-md-1"><button type="button" class="btn btn-xs btn-danger child-to-show" (click)="removeOrganisationFromSelection(member)"><span class="fa fa-minus"></span></button></div>
					</div>
				</div>
			</div>
		</div>
	</form>
</div>
<div class="modal-footer">
	<button type="button" class="btn bnt-default" (click)="cancel()">Cancel</button>
	<button type="button" class="btn btn-primary" *ngIf="!editMode" (click)="ok()">Ok</button>
	<button type="button" class="btn btn-success" *ngIf="editMode" (click)="ok()">Save</button>
</div>

